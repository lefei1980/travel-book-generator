âœ… Project Overview
Working Title

TravelBook Generator

Core Goal

Convert structured or semi-structured itinerary text into a downloadable, professionally formatted, map-rich PDF travel guide.

1ï¸âƒ£ Scope Validation

Your requirements are realistic and coherent. Hereâ€™s why:

âœ” Technically feasible

Maps: OpenStreetMap-based services

Routing: OSRM / OpenRouteService

Images + POI metadata: Wikipedia + OpenTripMap + Wikidata

PDF generation: HTML â†’ PDF via headless Chromium or WeasyPrint

Fully web-based and mobile friendly

âœ” Architecturally clean

Clear separation between:

Frontend (input + UX)

Backend enrichment

PDF rendering

âœ” Constrained Output

Your page constraints (1 summary page + 1 page per day) are important â€” this avoids layout explosion.

2ï¸âƒ£ Recommended Architecture
High-Level Architecture
Frontend (React / Next.js)
        â†“
Backend API (FastAPI or Node)
        â†“
Enrichment Engine
   â”œâ”€â”€ Geocoding
   â”œâ”€â”€ Routing
   â”œâ”€â”€ POI Metadata
   â”œâ”€â”€ Image Fetching
        â†“
Layout Engine (HTML templates)
        â†“
PDF Renderer (Headless Chrome)
        â†“
Downloadable File

3ï¸âƒ£ Frontend Design
Option A (Recommended)

Structured Day-by-Day Form

Trip Title
Trip Dates

Day 1
  Start Location
  Attractions (ordered list)
  Lunch
  Dinner
  End Location

Day 2 ...


Why structured input is better than free text:

Removes NLP complexity

Ensures map order

Makes routing deterministic

Simplifies backend dramatically

You can still allow:

â€œPaste existing itineraryâ€ â†’ auto-split into draft â†’ editable structured form

4ï¸âƒ£ Backend Components (Core Engineering)
4.1 Data Model
Trip
  title
  days: List[Day]

Day
  start_location
  attractions: List[Place]
  restaurants: List[Place]
  end_location

Place
  name
  type (hotel, attraction, restaurant)
  coordinates
  metadata
  image_url

5ï¸âƒ£ Public Data Sources (No Proprietary APIs Required)
ğŸ—º Geocoding

OpenStreetMap Nominatim

Or OpenRouteService Geocoder

ğŸš— Routing + Distance

OSRM (Open Source Routing Machine)

Or OpenRouteService API

Provides:

Driving route polyline

Distance

Duration

ğŸ“ Attractions Metadata

Wikipedia API

Wikidata API

OpenTripMap API

For each attraction:

Short description

Category

Location

Rating (if available)

ğŸ½ Restaurant Enrichment

More difficult without Yelp/Google.

Public alternatives:

OpenStreetMap tags

Wikidata

OpenTripMap

Possibly Foursquare Places API (free tier)

You can infer:

Cuisine type

Price level

Popular dishes (if Wikipedia entry exists)

6ï¸âƒ£ Map Rendering Strategy
Trip Summary Map (Page 1)

Static map image

Colored markers:

ğŸ”´ Hotels

ğŸŸ¢ Attractions

ğŸ”µ Restaurants

Generated via:

Static Map from MapTiler

Or self-hosted tile renderer

Or leaflet + screenshot via headless browser

Under map:

Trip summary (distilled itinerary)

Must fit on ONE PAGE.

Daily Map (Each Day)

Each day page:

[ Route Map ]
Segment 1 â†’ 25 min / 12 miles
Segment 2 â†’ 18 min / 8 miles
...


Route polyline drawn
Markers numbered in order

Generated by:

Fetch route geometry from OSRM

Render map with Leaflet

Take server-side screenshot

Embed in PDF

7ï¸âƒ£ PDF Generation Strategy (Critical Decision)
Recommended Approach
HTML + CSS â†’ Headless Chromium â†’ PDF

Why:

Total layout control

Easy mobile preview

Clean pagination

Easy image + map embedding

Supports page breaks

Tech options:

Puppeteer (Node)

Playwright

WeasyPrint (Python)

Each page template:

<div class="page">
   <DailyMap />
   <POI Sections />
</div>


Use CSS:

.page {
  page-break-after: always;
}

8ï¸âƒ£ Page Layout Specification
Page 1: Trip Overview

Top 60%:

Map with colored markers

Bottom 40%:

Condensed trip schedule:

Day 1: A â†’ B â†’ C

Day 2: â€¦

Page 2+: Per Day Layout

Top:

Driving route map

Distances labeled

Bottom:
For each POI:

[Thumbnail]   Title
              Short tourist-focused intro
              Tips / highlights


Restaurants:

Cuisine style
Ambience (casual/fine dining)
Top recommended dishes


Keep content length capped so page fits.

9ï¸âƒ£ Claude Code Project Blueprint

Below is a task breakdown you can give Claude Code.

PHASE 1 â€” Core Infrastructure
Task 1: Project Setup

Backend: FastAPI

Frontend: Next.js

Dockerize both

Define REST endpoints:

POST /generate-trip

GET /download/{id}

PHASE 2 â€” Input Processing
Task 2: Structured Form Schema

Create Pydantic models

Validate day order

Normalize place names

PHASE 3 â€” Geospatial Engine
Task 3: Geocoding Service

Convert all place names to lat/lon

Cache results locally (very important)

Task 4: Routing Service

For each day:

Build ordered coordinate list

Call OSRM

Parse:

total distance

segment durations

polyline geometry

PHASE 4 â€” POI Enrichment
Task 5: Attraction Metadata

Query Wikipedia API

Extract summary paragraph

Download thumbnail image

Task 6: Restaurant Metadata

Query OpenTripMap / OSM

Extract:

cuisine type

tags

rating if available

PHASE 5 â€” Map Rendering
Task 7: Map Generator

Create Leaflet-based HTML template

Inject:

markers

route polyline

numbered stops

Use Playwright to:

render page

screenshot map as PNG

PHASE 6 â€” PDF Engine
Task 8: HTML Layout Templates

Trip overview page

Daily page template

Task 9: PDF Generation

Render HTML

Generate PDF

Save to server

Return download link

PHASE 7 â€” Mobile Optimization

Frontend:

Responsive form

Collapsible day sections

Auto-save draft

ğŸ”’ Important Engineering Considerations
1. Rate Limits

Public APIs have limits.
Solution:

Add local caching

Debounce repeated geocoding

2. Image Licensing

Use:

Wikimedia Commons images

Only public domain / CC images

Store attribution metadata

3. Layout Overflow

Must:

Truncate descriptions

Limit to 100â€“150 words per POI

10ï¸âƒ£ MVP Scope Recommendation

To prevent project creep:

MVP Should:

Accept structured itinerary

Produce:

Overview map page

Per-day map page

Basic Wikipedia description

Thumbnail image

Export PDF

MVP Should NOT:

Do advanced NLP parsing

Optimize routes automatically

Include hotel pricing

Include live booking links